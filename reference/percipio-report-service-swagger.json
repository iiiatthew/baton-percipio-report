{"openapi":"3.0.0","info":{"title":"Reporting Services","version":"1.0.0","description":"Percipio Reporting Services"},"paths":{"/v1/organizations/{orgId}/report-requests/learning-activity":{"post":{"summary":"Returns a reportId to be used as a handle to retrieve the learner activity results.","operationId":"requestLearningActivityReport","description":"Learner activity report provides learning activity for learners and includes details such as course id and title, percent complete, completion date, etc. This API call returns a report handle used to retrieve the learning activity report via the report request API. The report data can be customized and filtered based on the parameters mentioned below.\nIf the response is not successful, the appropriate error response returns.\n","tags":["/v1"],"parameters":[{"name":"orgId","description":"Organization UUID","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LearnerActivityReportConfig"}}},"description":"The configuration to create request handle is supplied in the request body","required":true},"responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportRequest"}}}},"202":{"description":"Accepted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportRequest"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Unexpected error"}}}},"/v1/organizations/{orgId}/report-requests/content-access":{"post":{"summary":"Returns a reportId to be used as a handle to retrieve the popular content access results.","operationId":"requestContentActivityReport","description":"Content access report provides the content access metrics like total access, total duration, total completion etc., content id wise.\nIf the response is not successful, the appropriate error response returns.\n","tags":["/v1"],"parameters":[{"name":"orgId","description":"Organization UUID","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContentAccessReportConfig"}}},"description":"The configuration to create request handle is supplied in the request body","required":true},"responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportRequest"}}}},"202":{"description":"Accepted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportRequest"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Unexpected error"}}}},"/v1/organizations/{orgId}/report-requests/entitlements":{"post":{"summary":"Returns a reportId to be used as a handle to retrieve the entitlement report results.","operationId":"requestEntitlementReport","description":"Entitlement report provides information on what collection was accessed by whom and when.\nIf the response is not successful, the appropriate error response returns.\n","tags":["/v1"],"parameters":[{"name":"orgId","description":"Organization UUID","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EntitlementsReportConfig"}}},"description":"The configuration to create request handle is supplied in the request body","required":true},"responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportRequest"}}}},"202":{"description":"Accepted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportRequest"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Unexpected error"}}}},"/v1/organizations/{orgId}/report-requests/collections-content":{"post":{"summary":"Returns a reportId to be used as a handle to retrieve the collections content results.","operationId":"requestCollectionsContentReport","description":"Collections content report provides information about the organizationâ€™s subscribed collections and includes details such as the collection name, asset types, status, etc. This API call returns a report handle used to retrieve the collections content report via the report request API. The report data can be customized and filtered based on the parameters mentioned below.\nIf the response is not successful, the appropriate error response returns.\n","tags":["/v1"],"parameters":[{"name":"orgId","description":"Organization UUID","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionContentReportConfig"}}},"description":"The configuration to create request handle is supplied in the request body","required":true},"responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportRequest"}}}},"202":{"description":"Accepted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportRequest"}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Unexpected error"}}}},"/v1/organizations/{orgId}/report-requests/{reportRequestId}":{"get":{"summary":"Handles all learner activity and collection content events.","operationId":"getReportRequest","description":"Based on the report id generated by the learner activity API or the collection content API by using this get report content API\nwe get the detailed report with respect to the report id provided. This report id could either be with respect to the learning activity\nof the learners of a given organization or the collections content subscribed by the organization.\n\nIf the response is not successful it will return the appropriate error response.\n","tags":["/v1"],"parameters":[{"name":"orgId","description":"Organization UUID","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"reportRequestId","description":"Handle to access the report content","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"If status is 'In_Progress' returns the same, If 'Processed' returns the content.","content":{"application/json":{"schema":{"type":"array","items":{"type":"object"}}}}},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"404":{"description":"Not Found"},"500":{"description":"Unexpected error"}}}}},"tags":[],"security":[{"Authorization":[]}],"servers":[{"url":"/reporting"}],"components":{"securitySchemes":{"Authorization":{"type":"http","description":"Service account authorization token","scheme":"bearer"}},"schemas":{"BaseReportConfig":{"type":"object","properties":{"sftpId":{"description":"SFTP Id associated with OrgId","type":"string","format":"uuid"},"isFileRequiredInSftp":{"type":"boolean","default":true,"description":"Generated files are required to deliver in the respected sftp location. Default value is true."},"zip":{"type":"boolean","default":false,"description":"Generate the reports in zip file format. Default value is false."},"encrypt":{"type":"boolean","default":false,"description":"Generate the report file as PGP encrypted file. Default value is false."},"isPgpFileExtnNotReqrd":{"type":"boolean","default":false,"description":"If the file that need to be ecncrypted should not include a extension of .pgp at the end of the file name, the value should be set to true. If user sets the value as false or doesn't include the flag a .pgp extension will be appended at the end of file name."},"formatType":{"type":"string","description":"Format Type, defaults to JSON, the value is extracted from Accept attribute in header","default":"JSON","enum":["JSON","CSV","TXT"]},"fileMask":{"type":"string","description":"Absolute or masked pattern for the generated report file. Example file masks - fileName_{DD}{MM}{YYYY}, fileName_{ORG_ID}"},"folderName":{"type":"string","description":"custom folder under sftp reports wherein the generated report file is to be placed."},"includeMillisInFilename":{"type":"boolean","default":false,"description":"Generate files with unix based timestamp. Example - fileName.csv.1561642446608"}}},"ContentAccessReportConfig":{"type":"object","allOf":[{"properties":{"start":{"description":"Start date for events retrieval","example":"2017-01-01T10:10:24Z","type":"string","format":"date-time"},"end":{"description":"End date for events retrieval","example":"2018-01-10T10:20:24Z","type":"string","format":"date-time"},"timeFrame":{"description":"To calculate the start/end date dynamically based on timeframe and when the report is submitted date. [User can submit an absolute date range (start/end date) or a relative date range (timeframe) but never both]","type":"string","enum":["DAY","WEEK","THIRTY_DAYS","CALENDAR_MONTH"]},"audience":{"description":"Audience filter, defaults to all audience","type":"string","default":"ALL"},"locale":{"description":"The field to use for specifying language. Will default to all when not specified. example format 'en' or 'fr' or 'de' etc.","type":"string"},"collectionName":{"description":"Collections used for content lookup, comma delimited and defaults to all collections","type":"string","default":"ALL"},"assetTypes":{"description":"Content types filter, comma delimited and default to all content types","type":"string","example":"AudioBook,Audio Summary,Book,Book Summary,Course,Linked Content,Video,Scheduled Content"},"sort":{"description":"The field to use for sorting and which order to sort in, if sort is not included the results will be returned descending by total accesses","type":"object","properties":{"field":{"type":"string","default":"totalAccesses","enum":["collection","contentTitle","channelTitle","contentId","contentType","uniqueUserAccesses","totalAccesses","totalDuration","avgDuration","totalCompletionsWithCourseVideo"]},"order":{"type":"string","default":"desc","enum":["asc","desc"]}},"required":["field","order"]},"status":{"description":"Content access status filter, defaults to all status type","type":"string","enum":["Published","Retired","PendingRetirement"]}}},{"$ref":"#/components/schemas/BaseReportConfig"}]},"EntitlementsReportConfig":{"type":"object","allOf":[{"properties":{"start":{"description":"Start date for events retrieval","example":"2017-01-01T10:10:24Z","type":"string","format":"date-time"},"end":{"description":"End date for events retrieval","example":"2018-01-10T10:20:24Z","type":"string","format":"date-time"},"timeFrame":{"description":"To calculate the start/end date dynamically based on timeframe and when the report is submitted date. [User can submit an absolute date range (start/end date) or a relative date range (timeframe) but never both]","type":"string","enum":["DAY","WEEK","THIRTY_DAYS","CALENDAR_MONTH"]},"audience":{"description":"Audience filter, defaults to all","type":"string","default":"ALL"},"user":{"description":"Users filter, comma delimited and defaults to all","type":"string","default":"ALL"},"collection":{"description":"Collection title filter, comma delimited and defaults to all","type":"string","default":"ALL"},"sort":{"description":"The field to use for sorting and which order to sort in, if sort is not included the results will be returned ascending by collection","type":"object","properties":{"field":{"type":"string","default":"collection","enum":["collection","userId","firstName","lastName","emailAddress","entitledByAudience","consumed"]},"order":{"type":"string","default":"asc","enum":["asc","desc"]}},"required":["field","order"]}}},{"$ref":"#/components/schemas/BaseReportConfig"}]},"LearnerActivityReportConfig":{"type":"object","allOf":[{"properties":{"start":{"description":"Start date for events retrieval","example":"2018-01-01T10:10:24Z","type":"string","format":"date-time"},"end":{"description":"End date for events retrieval","example":"2018-01-10T10:20:24Z","type":"string","format":"date-time"},"timeFrame":{"description":"To calculate the start/end date dynamically based on timeframe and when the report is submitted date. [User can submit an absolute date range (start/end date) or a relative date range (timeframe) but never both]","type":"string","enum":["DAY","WEEK","THIRTY_DAYS","CALENDAR_MONTH"]},"audience":{"description":"Audience filter, defaults to all audience","type":"string","default":"ALL"},"locale":{"description":"The field to use for specifying language. Will default to all when not specified. example format 'en' or 'fr' or 'de' etc.","type":"string"},"contentType":{"description":"Content types filter, comma delimited and default to all content types","type":"string","example":"AudioBook,Audio Summary,Book,Book Summary,Channel,Course,Journey,Linked Content,Video,Scheduled Content,Assessment"},"template":{"description":"XML template for LMS based on learning report export. This parameter is required for XML formatType. `Please Note- If template is present then the value of formatType should be XML only`.","type":"string","enum":["WORKDAY_REPORTING"]},"plugin":{"description":"A highly customized LMS specific LAR export that supports minimal configuration. Values are case-sensitive `Please Note- Transform should correspond to the selected plugin. If transformName is not provided then the transform with the name similar to that of the plugin will be used as per preferential logic.`","type":"string","example":"Workday2"},"transformName":{"description":"Jsonata transform name to transform Percipio fields to client sepecific fields, either transform name or mapping should be given but not both.","type":"string"},"mapping":{"description":"Jsonata transform mapping to transform Percipio fields to client sepecific fields, either transform name or mapping should be given but not both.","type":"string"},"csvPreferences":{"description":"csv preferences to generate csv file for the transformed output","type":"object","properties":{"header":{"type":"boolean","default":true},"rowDelimiter":{"type":"string","default":"\\n"},"columnDelimiter":{"type":"string","default":","},"headerForNoRecords":{"description":"Option to generate headers in CSV when there is no data. `Please Note - headerForNoRecords will be considered only when header is true`","type":"boolean","default":false}}},"sort":{"description":"The field to use for sorting and which order to sort in, if sort is not included the results will be returned descending by lastAccessDate","type":"object","properties":{"field":{"type":"string","default":"lastAccessDate","enum":["contentId","contentTitle","contentType","status","duration","completedDate","firstAccessDate","lastAccessDate","timesAccessed","firstScore","lastScore","highScore","assessmentAttempts","percentOfBookOrVideo","audience"]},"order":{"type":"string","default":"desc","enum":["asc","desc"]}},"required":["field","order"]},"status":{"description":"Learner activity status filter, defaults to all status type","type":"string","enum":["ACHIEVED","ACTIVE","COMPLETED","LISTENED","READ","STARTED","WATCHED","ABANDONED"]}}},{"$ref":"#/components/schemas/BaseReportConfig"}]},"CollectionContentReportConfig":{"type":"object","allOf":[{"properties":{"collectionName":{"description":"Collections used for content lookup, comma delimited and defaults to all collections","type":"string","default":"ALL"},"sort":{"description":"The field to use for sorting and which order to sort in, if sort is not included the results will be returned ascending by collection","type":"object","properties":{"field":{"type":"string","default":"collection","enum":["collection","channelTitle","contentId","contentTitle","contentType","status","description"]},"order":{"type":"string","default":"asc","enum":["asc","desc"]}},"required":["field","order"]},"contentType":{"description":"Content types filter, comma delimited and default to all content types","type":"string","example":"AudioBook,Audio Summary,Book,Book Summary,Course,Linked Content,Scheduled Content"},"status":{"description":"Content status filter, comma delimited and defaults to all status type.","type":"string","enum":["Published","Retired","PendingRetirement"]},"locale":{"description":"The field to use for specifying language. Will default to all when not specified.  example format 'en' or 'fr' or 'de' etc.","type":"string"}}},{"$ref":"#/components/schemas/BaseReportConfig"}],"required":["collectionName"]},"ReportRequest":{"type":"object","properties":{"id":{"type":"string","description":"id"},"status":{"type":"string","description":"status","enum":["PENDING","IN_PROGRESS","PROCESSED","FAILED"]}}},"CollectionContent":{"properties":{"sftpId":{"type":"string"},"collection":{"type":"string","description":"Collection name for the group of content"},"channelTitle":{"type":"string"},"contentId":{"type":"string"},"contentTitle":{"type":"string"},"contentType":{"type":"string","enum":["AudioBook","Audio Summary","Book","Book Summary","Course","Linked Content","Scheduled Content"]},"status":{"type":"string","enum":["Published","Retired","PendingRetirement"]},"description":{"type":"string"},"languageCode":{"type":"string"}}},"LearnerActivity":{"properties":{"sftpId":{"type":"string"},"userId":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"audience":{"type":"string"},"contentUuid":{"type":"string"},"contentId":{"type":"string"},"contentTitle":{"type":"string"},"contentType":{"type":"string","enum":["AudioBook","Audio Summary","Book","Book Summary","Channel","Course","Journey","Linked Content","Video","Scheduled Content","Assessment"]},"status":{"type":"string","enum":["Achieved","Active","Completed","Listened","Read","Started","Watched"]},"completedDate":{"type":"string"},"duration":{"type":"integer","description":"units in seconds."},"firstAccess":{"type":"string","description":"ISO-8601 date format."},"lastAccess":{"type":"string","description":"ISO-8601 date format."},"totalAccesses":{"type":"integer"},"firstScore":{"type":"integer"},"highScore":{"type":"integer"},"lastScore":{"type":"integer"},"assessmentAttempts":{"type":"integer"},"% ofVideoOrBook":{"type":"string","description":"percentage of video or book completed"},"emailAddress":{"type":"string"},"languageCode":{"type":"string"},"customAttributes":{"type":"object","description":"Organization defined key/value pairs","additionalProperties":{"maxLength":255,"nullable":true,"type":"string"},"example":{"Department":"IT - Northeast","Employee Code":"12345"}}}},"ContentAccess":{"properties":{"sftpId":{"type":"string"},"collection":{"type":"string"},"channel":{"type":"string"},"contentId":{"type":"string"},"contentTitle":{"type":"string"},"contentType":{"type":"string"},"totalAccesses":{"type":"string"},"totalDuration":{"type":"string"},"averageDuration":{"type":"string"},"totalCompletions":{"type":"integer"},"totalUniqueUsers":{"type":"integer"},"languageCode":{"type":"string"}}},"Entitlements":{"properties":{"collection":{"type":"string"},"userId":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"emailAddress":{"type":"string"},"entitledByAudience":{"type":"string"},"consumed":{"type":"string","format":"date"}}}}}}